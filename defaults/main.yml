---
# defaults file for arillso.motd

motd_ascii_art: |-2
       _              _ _     _
      / \   _ __  ___(_) |__ | | ___
     / _ \ | '_ \/ __| | '_ \| |/ _ \
    / ___ \| | | \__ \ | |_) | |  __/
   /_/   \_\_| |_|___/_|_.__/|_|\___|

motd_info:
  - " FQDN:                ": "{{ ansible_fqdn }}"
  - " Distro:              ": "{{ ansible_distribution }} {{ ansible_distribution_version }} {{ ansible_distribution_release }}"
  - " Virtual:             ": "{{ 'YES' if ansible_virtualization_role == 'guest' else 'NO' }}"
  - " Virtualization Type: ": "{{ ansible_virtualization_type }}\n"
  - " CPUs:                ": "{{ ansible_processor_vcpus }}"
  - " RAM:                 ": "{{ (ansible_memtotal_mb / 1000) | round(1) }}GB"
  - " Swap:                ": "{{ (ansible_swaptotal_mb / 1024) | round(1) }}GB"
  - " Timezone:            ": "{{ ansible_date_time.tz }}({{ ansible_date_time.tz_offset }})"

motd_content: |
  --------------------------------------------------------------------------
                      This system is managed by Ansible
  --------------------------------------------------------------------------

  {% for item in motd_info %}
  {% for key, value in item.iteritems() %}
  {{ key }}{{ value }}
  {% endfor %}
  {% endfor %}


  {% for mnt in ansible_mounts %}
  {%   if mnt.size_total != none %}
   Mount: {{ mnt.device }}({{ mnt.mount }})({{ (mnt.size_total / 1024 / 1024 / 1024)| round(1) }}GB)
  {%   endif %}
  {% endfor %}

  {% if ansible_interfaces is defined %}
   Interfaces:
  {%   for int in ansible_interfaces %}
    Interface: {{ int }}
  {%     if hostvars[inventory_hostname]['ansible_'+int] is defined %}
  {%       if hostvars[inventory_hostname]['ansible_'+int]['ipv4'] is defined %}
  {%         if hostvars[inventory_hostname]['ansible_'+int]['ipv4']['address'] is defined %}
     ip: {{ hostvars[inventory_hostname]['ansible_'+int]['ipv4']['address'] }}
  {%         endif %}
  {%       endif %}
  {%       if hostvars[inventory_hostname]['ansible_'+int]['macaddress'] is defined %}
     mac: {{ hostvars[inventory_hostname]['ansible_'+int]['macaddress'] }}
  {%       endif %}
  {%     endif %}
  {%   endfor %}
  {% endif %}

  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  Last ansible run: {{ ansible_date_time.iso8601 }}
